<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‘¨æ°ä¼¦2025å˜‰å¹´åä¸–ç•Œå·¡å›æ¼”å”±ä¼š-ä¸Šæµ·ç«™ - æ·˜ç¥¨ç¥¨</title>
    <link rel="stylesheet" href="/assets/css/client-common.css">
    <link rel="stylesheet" href="/assets/css/client.css">
</head>
<body>
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <header class="header">
        <div class="container header-inner">
            <a href="index.html" class="logo">
                <span style="font-size: 28px;">ğŸ«</span>
                <span>æ·˜ç¥¨ç¥¨</span>
            </a>

            <nav class="nav">
                <a href="index.html" class="nav-link">é¦–é¡µ</a>
                <a href="favorites.html" class="nav-link">æˆ‘çš„æ”¶è—</a>
                <a href="order-center.html" class="nav-link">æˆ‘çš„è®¢å•</a>
                <a href="notifications.html" class="nav-link">æ¶ˆæ¯é€šçŸ¥</a>
                <a href="profile.html" class="nav-link">ä¸ªäººä¸­å¿ƒ</a>
            </nav>

            <div class="header-actions">
                <a href="ai-qa.html" class="btn btn-outline btn-small">AIåŠ©æ‰‹</a>
                <div style="display: flex; align-items: center; gap: 8px;">
                    <div style="width: 32px; height: 32px; border-radius: 50%; background: #e3f2fd; display: flex; align-items: center; justify-content: center;">å¼ </div>
                    <span>å¼ ä¸‰</span>
                </div>
            </div>
        </div>
    </header>

    <!-- ä¸»å†…å®¹åŒº -->
    <main class="main-content">
        <div class="container">
            <!-- é¢åŒ…å±‘ -->
            <ul class="breadcrumb">
                <li class="breadcrumb-item"><a href="index.html">é¦–é¡µ</a></li>
                <li class="breadcrumb-item"><a href="index.html">æ¼”å”±ä¼š</a></li>
                <li class="breadcrumb-item">å‘¨æ°ä¼¦2025å˜‰å¹´åä¸–ç•Œå·¡å›æ¼”å”±ä¼š-ä¸Šæµ·ç«™</li>
            </ul>

            <!-- æ¼”å‡ºè¯¦æƒ…å¤´éƒ¨ -->
            <div class="detail-header">
                <div class="detail-main">
                    <div class="detail-cover" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);"></div>

                    <div class="detail-content">
                        <h1 class="detail-title">å‘¨æ°ä¼¦2025å˜‰å¹´åä¸–ç•Œå·¡å›æ¼”å”±ä¼š-ä¸Šæµ·ç«™</h1>

                        <div class="detail-info">
                            <div class="detail-info-item">
                                <span class="detail-info-label">è‰ºäºº/ä¸»åŠæ–¹ï¼š</span>
                                <span class="detail-info-value">å‘¨æ°ä¼¦</span>
                            </div>
                            <div class="detail-info-item">
                                <span class="detail-info-label">ç±»å‹ï¼š</span>
                                <span class="detail-info-value">æ¼”å”±ä¼š</span>
                            </div>
                            <div class="detail-info-item">
                                <span class="detail-info-label">åŸå¸‚ï¼š</span>
                                <span class="detail-info-value">ä¸Šæµ·</span>
                            </div>
                            <div class="detail-info-item">
                                <span class="detail-info-label">åœºé¦†ï¼š</span>
                                <span class="detail-info-value">ä¸Šæµ·ä½“è‚²åœºï¼ˆå¾å®¶æ±‡ä½“è‚²å…¬å›­ï¼‰</span>
                            </div>
                            <div class="detail-info-item">
                                <span class="detail-info-label">åœ°å€ï¼š</span>
                                <span class="detail-info-value">ä¸Šæµ·å¸‚å¾æ±‡åŒºå¤©é’¥æ¡¥è·¯666å·</span>
                            </div>
                        </div>

                        <div class="detail-actions">
                            <a href="session-list.html" class="btn btn-primary btn-large">ç«‹å³è´­ç¥¨</a>
                            <button class="btn btn-outline btn-large">è®¾ç½®å¼€å”®æé†’</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- æ¼”å‡ºé¡»çŸ¥ -->
            <div class="detail-section">
                <h2 class="detail-section-title">æ¼”å‡ºé¡»çŸ¥</h2>
                <div class="detail-section-content">
                    <p style="margin-bottom: 12px;">1. æ¼”å‡ºæ—¶é•¿ï¼šçº¦120åˆ†é’Ÿï¼ˆä»¥ç°åœºä¸ºå‡†ï¼‰</p>
                    <p style="margin-bottom: 12px;">2. æœ€ä½æ¼”å‡ºæ—¶é•¿ï¼š90åˆ†é’Ÿ</p>
                    <p style="margin-bottom: 12px;">3. å…¥åœºæ—¶é—´ï¼šè¯·æå‰90åˆ†é’Ÿå…¥åœº</p>
                    <p style="margin-bottom: 12px;">4. æœ€ä½å„¿ç«¥è´­ç¥¨æ ‡å‡†ï¼š1.2ç±³ä»¥ä¸‹å„¿ç«¥è°¢ç»å…¥åœºï¼Œ1.2ç±³ä»¥ä¸Šå„¿ç«¥éœ€å‡­ç¥¨å…¥åœº</p>
                    <p style="margin-bottom: 12px;">5. åº§ä½ç±»å‹ï¼šå¯¹å·å…¥åº§</p>
                    <p style="margin-bottom: 12px;">6. ä»˜æ¬¾æ—¶æ•ˆï¼šä¸‹å•å15åˆ†é’Ÿå†…å®Œæˆæ”¯ä»˜</p>
                    <p style="margin-bottom: 12px;">7. é€€æ¢æ”¿ç­–ï¼šç¥¨å“ä¸ºæœ‰ä»·è¯åˆ¸ï¼Œéè´¨é‡é—®é¢˜ä¸æ”¯æŒé€€æ¢</p>
                    <p>8. ç¦æ­¢æºå¸¦ç‰©å“ï¼šä¸“ä¸šæ‘„å½±å™¨æã€é¥®æ–™ã€é£Ÿå“ã€æ‰“ç«æœºç­‰</p>
                </div>
            </div>

            <!-- åœºé¦†ä¿¡æ¯ -->
            <div class="detail-section">
                <h2 class="detail-section-title">åœºé¦†ä¿¡æ¯ä¸äº¤é€š</h2>
                <div class="detail-section-content">
                    <h3 style="font-size: 16px; font-weight: 600; margin-bottom: 12px; color: #333;">ä¸Šæµ·ä½“è‚²åœºï¼ˆå¾å®¶æ±‡ä½“è‚²å…¬å›­ï¼‰</h3>

                    <p style="margin-bottom: 12px;"><strong>åœ°å€ï¼š</strong>ä¸Šæµ·å¸‚å¾æ±‡åŒºå¤©é’¥æ¡¥è·¯666å·</p>

                    <h4 style="font-size: 14px; font-weight: 600; margin: 16px 0 8px; color: #333;">å…¬å…±äº¤é€š</h4>
                    <p style="margin-bottom: 8px;">åœ°é“ï¼š1å·çº¿ã€4å·çº¿ã€11å·çº¿ä¸Šæµ·ä½“è‚²é¦†ç«™</p>
                    <p style="margin-bottom: 8px;">å…¬äº¤ï¼š43è·¯ã€89è·¯ã€92è·¯ã€167è·¯ç­‰å¤šæ¡çº¿è·¯å¯è¾¾</p>

                    <h4 style="font-size: 14px; font-weight: 600; margin: 16px 0 8px; color: #333;">åœè½¦ä¿¡æ¯</h4>
                    <p style="margin-bottom: 8px;">åœºé¦†å†…è®¾æœ‰åœè½¦åœºï¼Œæ¼”å‡ºæœŸé—´åœè½¦ä½ç´§å¼ ï¼Œå»ºè®®é€‰æ‹©å…¬å…±äº¤é€šå‡ºè¡Œ</p>

                    <h4 style="font-size: 14px; font-weight: 600; margin: 16px 0 8px; color: #333;">å‘¨è¾¹æœåŠ¡</h4>
                    <p>åœºé¦†å‘¨è¾¹é¤é¥®ã€ä¾¿åˆ©åº—ç­‰é…å¥—è®¾æ–½é½å…¨</p>
                </div>
            </div>

            <!-- ç¥¨æ¡£è¯´æ˜ -->
            <div class="detail-section">
                <h2 class="detail-section-title">ç¥¨æ¡£è¯´æ˜</h2>
                <div class="detail-section-content">
                    <div class="ticket-tiers">
                        <div class="ticket-tier">
                            <div class="ticket-tier-info">
                                <div class="ticket-tier-name">VIPå†…åœº</div>
                                <div class="ticket-tier-remaining">ä½™ç¥¨å……è¶³</div>
                            </div>
                            <div class="ticket-tier-price">Â¥2580</div>
                        </div>

                        <div class="ticket-tier">
                            <div class="ticket-tier-info">
                                <div class="ticket-tier-name">å†…åœº</div>
                                <div class="ticket-tier-remaining">ä½™ç¥¨ç´§å¼ </div>
                            </div>
                            <div class="ticket-tier-price">Â¥1880</div>
                        </div>

                        <div class="ticket-tier">
                            <div class="ticket-tier-info">
                                <div class="ticket-tier-name">çœ‹å°ä¸€ç­‰</div>
                                <div class="ticket-tier-remaining">ä½™ç¥¨å……è¶³</div>
                            </div>
                            <div class="ticket-tier-price">Â¥1280</div>
                        </div>

                        <div class="ticket-tier">
                            <div class="ticket-tier-info">
                                <div class="ticket-tier-name">çœ‹å°äºŒç­‰</div>
                                <div class="ticket-tier-remaining">ä½™ç¥¨å……è¶³</div>
                            </div>
                            <div class="ticket-tier-price">Â¥880</div>
                        </div>

                        <div class="ticket-tier">
                            <div class="ticket-tier-info">
                                <div class="ticket-tier-name">çœ‹å°ä¸‰ç­‰</div>
                                <div class="ticket-tier-remaining">ä½™ç¥¨å……è¶³</div>
                            </div>
                            <div class="ticket-tier-price">Â¥580</div>
                        </div>

                        <div class="ticket-tier">
                            <div class="ticket-tier-info">
                                <div class="ticket-tier-name">çœ‹å°å››ç­‰</div>
                                <div class="ticket-tier-remaining">ä½™ç¥¨å……è¶³</div>
                            </div>
                            <div class="ticket-tier-price">Â¥380</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ç›¸å…³æ¨è -->
            <div class="detail-section">
                <h2 class="detail-section-title">ç›¸å…³æ¨è</h2>
                <div class="event-grid" style="grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));">
                    <div class="event-card" onclick="location.href='event-detail.html'">
                        <div class="event-cover" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); height: 160px;"></div>
                        <div class="event-info">
                            <div class="event-title" style="font-size: 14px;">æ—ä¿Šæ°JJ20ä¸–ç•Œå·¡å›æ¼”å”±ä¼š</div>
                            <div class="event-price" style="font-size: 14px;">Â¥480èµ·</div>
                        </div>
                    </div>

                    <div class="event-card" onclick="location.href='event-detail.html'">
                        <div class="event-cover" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); height: 160px;"></div>
                        <div class="event-info">
                            <div class="event-title" style="font-size: 14px;">ç»å…¸éŸ³ä¹å‰§ã€Šå‰§é™¢é­…å½±ã€‹ä¸­æ–‡ç‰ˆ</div>
                            <div class="event-price" style="font-size: 14px;">Â¥180èµ·</div>
                        </div>
                    </div>

                    <div class="event-card" onclick="location.href='event-detail.html'">
                        <div class="event-cover" style="background: linear-gradient(135deg, #30cfd0 0%, #330867 100%); height: 160px;"></div>
                        <div class="event-info">
                            <div class="event-title" style="font-size: 14px;">2025ä¸Šæµ·è‰è“éŸ³ä¹èŠ‚</div>
                            <div class="event-price" style="font-size: 14px;">Â¥360èµ·</div>
                        </div>
                    </div>

                    <div class="event-card" onclick="location.href='event-detail.html'">
                        <div class="event-cover" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); height: 160px;"></div>
                        <div class="event-info">
                            <div class="event-title" style="font-size: 14px;">å¼ æƒ å¦¹ASMRä¸–ç•Œå·¡å›æ¼”å”±ä¼š</div>
                            <div class="event-price" style="font-size: 14px;">Â¥580èµ·</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- JavaScript -->
    <script src="/assets/js/client-api.js"></script>
    <script src="/assets/js/client-constants.js"></script>
    <script src="/assets/js/client-events.js"></script>
    <script src="/assets/js/client-sessions.js"></script>
    <script src="/assets/js/client-venues.js"></script>
    <script>
        // è·å–URLå‚æ•°ä¸­çš„æ¼”å‡ºID
        const urlParams = new URLSearchParams(window.location.search);
        const eventId = urlParams.get('id');

        // é¡µé¢åŠ è½½æ—¶è·å–æ¼”å‡ºè¯¦æƒ…
        window.addEventListener('DOMContentLoaded', () => {
            if (eventId) {
                loadEventDetail(eventId);
                loadEventSessions(eventId);
            } else {
                showErrorMessage('ç¼ºå°‘æ¼”å‡ºIDå‚æ•°');
            }
        });

        /**
         * åŠ è½½æ¼”å‡ºè¯¦æƒ…
         */
        async function loadEventDetail(id) {
            try {
                const event = await getEventDetail(id);
                renderEventDetail(event);
            } catch (error) {
                console.error('åŠ è½½æ¼”å‡ºè¯¦æƒ…å¤±è´¥:', error);
                showErrorMessage('åŠ è½½æ¼”å‡ºè¯¦æƒ…å¤±è´¥: ' + error.message);
            }
        }

        /**
         * æ¸²æŸ“æ¼”å‡ºè¯¦æƒ…
         */
        function renderEventDetail(event) {
            // æ›´æ–°é¡µé¢æ ‡é¢˜
            document.title = `${event.name} - æ·˜ç¥¨ç¥¨`;

            // æ›´æ–°é¢åŒ…å±‘
            const breadcrumbItems = document.querySelectorAll('.breadcrumb-item');
            if (breadcrumbItems.length >= 3) {
                breadcrumbItems[1].innerHTML = `<a href="index.html?type=${event.type}">${EVENT_TYPE_MAP[event.type] || 'æ¼”å‡º'}</a>`;
                breadcrumbItems[2].textContent = event.name;
            }

            // æ›´æ–°æ¼”å‡ºæ ‡é¢˜
            document.querySelector('.detail-title').textContent = event.name;

            // æ›´æ–°æ¼”å‡ºä¿¡æ¯
            const detailInfo = document.querySelector('.detail-info');
            detailInfo.innerHTML = `
                <div class="detail-info-item">
                    <span class="detail-info-label">è‰ºäºº/ä¸»åŠæ–¹ï¼š</span>
                    <span class="detail-info-value">${event.artist || '-'}</span>
                </div>
                <div class="detail-info-item">
                    <span class="detail-info-label">ç±»å‹ï¼š</span>
                    <span class="detail-info-value">${EVENT_TYPE_MAP[event.type] || event.type}</span>
                </div>
                <div class="detail-info-item">
                    <span class="detail-info-label">åŸå¸‚ï¼š</span>
                    <span class="detail-info-value">${event.city || '-'}</span>
                </div>
                <div class="detail-info-item">
                    <span class="detail-info-label">æ¼”å‡ºæ—¶é—´ï¼š</span>
                    <span class="detail-info-value">${event.eventStartDate} ~ ${event.eventEndDate}</span>
                </div>
                <div class="detail-info-item">
                    <span class="detail-info-label">æ¼”å‡ºæ—¶é•¿ï¼š</span>
                    <span class="detail-info-value">${event.duration || '-'}åˆ†é’Ÿ</span>
                </div>
            `;

            // æ›´æ–°è´­ç¥¨æŒ‰é’®é“¾æ¥
            const buyButtons = document.querySelectorAll('.detail-actions .btn-primary');
            buyButtons.forEach(btn => {
                btn.href = `session-list.html?eventId=${event.id}`;
            });

            // æ›´æ–°ç¥¨æ¡£è¯´æ˜
            renderTicketTiers(event.ticketTiers);

            // æ›´æ–°æ¸©é¦¨æç¤º
            if (event.tips) {
                updateTipsSection(event.tips, event.refundPolicy);
            }

            // æ›´æ–°æ ‡ç­¾
            if (event.tags && event.tags.length > 0) {
                const tagsHtml = event.tags.map(tag => `<span class="badge badge-info">${tag}</span>`).join(' ');
                const detailContent = document.querySelector('.detail-content');
                const tagsDiv = document.createElement('div');
                tagsDiv.style.marginTop = '12px';
                tagsDiv.innerHTML = tagsHtml;
                detailContent.appendChild(tagsDiv);
            }
        }

        /**
         * æ¸²æŸ“ç¥¨æ¡£åˆ—è¡¨
         */
        function renderTicketTiers(ticketTiers) {
            const container = document.querySelector('.ticket-tiers');

            if (!ticketTiers || ticketTiers.length === 0) {
                container.innerHTML = '<p class="text-muted">æš‚æ— ç¥¨æ¡£ä¿¡æ¯</p>';
                return;
            }

            container.innerHTML = ticketTiers.map(tier => `
                <div class="ticket-tier">
                    <div class="ticket-tier-info">
                        <div class="ticket-tier-name">${tier.name}</div>
                        <div class="ticket-tier-remaining">${tier.description || ''}</div>
                    </div>
                    <div class="ticket-tier-price">${formatPrice(tier.price)}</div>
                </div>
            `).join('');
        }

        /**
         * æ›´æ–°æ¸©é¦¨æç¤ºåŒºåŸŸ
         */
        function updateTipsSection(tips, refundPolicy) {
            const tipsSection = document.querySelector('.detail-section');
            if (tipsSection && tipsSection.querySelector('.detail-section-title').textContent === 'æ¼”å‡ºé¡»çŸ¥') {
                const content = tipsSection.querySelector('.detail-section-content');
                let tipsHtml = '';

                if (tips) {
                    tipsHtml += `<p style="margin-bottom: 12px;">${tips}</p>`;
                }
                if (refundPolicy) {
                    tipsHtml += `<p style="margin-bottom: 12px;"><strong>é€€æ¢ç¥¨æ”¿ç­–ï¼š</strong>${refundPolicy}</p>`;
                }

                if (tipsHtml) {
                    content.innerHTML = tipsHtml;
                }
            }
        }

        /**
         * æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
         */
        function showErrorMessage(message) {
            const mainContent = document.querySelector('.main-content .container');
            mainContent.innerHTML = `
                <div class="empty-state">
                    <div class="empty-state-icon">âš ï¸</div>
                    <div class="empty-state-text">${message}</div>
                    <a href="index.html" class="btn btn-primary" style="margin-top: 16px;">è¿”å›é¦–é¡µ</a>
                </div>
            `;
        }
    </script>

    <!-- é¡µè„š -->
    <footer class="footer">
        <div class="container">
            <div class="footer-bottom">
                <p>Copyright Â© 2025 æ·˜ç¥¨ç¥¨ All Rights Reserved. | æ²ªICPå¤‡12345678å·</p>
            </div>
        </div>
    </footer>
</body>
</html>
