{
  "project_name": "淘票票票务系统",
  "current_phase": "frontend-admin开发",
  "tech_stack": {
    "frontend": "HTML5 + CSS3 + 原生JavaScript",
    "backend": "待对接 (RESTful API)",
    "database": "MySQL",
    "deploy": "Nginx本地开发环境"
  },
  "project_structure": {
    "frontend-admin": "管理后台前端 (主要开发目录)",
    "frontend-client": "客户端前端 - 用户购票相关页面",
    "database": "数据库DDL文件",
    "docs": "设计文档和接口规范"
  },
  "client_pages": {
    "已实现页面": [
      "index.html (首页)",
      "login.html (登录页)",
      "event-detail.html (演出详情)",
      "session-list.html (场次列表)",
      "ticket-tier-selection.html (票档选择)",
      "seat-selection.html (选座)",
      "order-confirm.html (订单确认)",
      "reservation-result.html (预订结果)",
      "order-center.html (订单中心)",
      "order-detail.html (订单详情)",
      "favorites.html (我的收藏)",
      "profile.html (个人中心)",
      "notifications.html (消息通知)",
      "address-management.html (地址管理)",
      "attendee-management.html (观演人管理)",
      "account-security.html (账户安全)",
      "ai-qa.html (AI助手)",
      "ai-subscription.html (AI订阅)",
      "help-center.html (帮助中心)"
    ]
  },
  "admin_pages": {
    "已实现列表页面": [
      "admin-events.html (演出管理) - event-list.js",
      "admin-sessions.html (场次管理) - session-list.js",
      "admin-venues.html (场馆管理) - venue-list.js"
    ],
    "已实现编辑页面": [
      "admin-event-edit.html (演出编辑) - event-edit.js",
      "admin-session-edit.html (场次编辑) - session-edit.js",
      "admin-venue-edit.html (场馆编辑) - venue-edit.js"
    ],
    "待实现页面": [
      "admin-orders.html (订单管理)",
      "admin-seats.html (座位管理)",
      "AI功能模块页面"
    ]
  },
  "core_modules": {
    "assets/js/auth.js": "JWT认证管理 - Token存储、获取、清除",
    "assets/js/auth-check.js": "页面登录检查 - 自动跳转未登录用户",
    "assets/js/api.js": "统一API请求封装 - 自动携带Token、处理401/403"
  },
  "data_models": {
    "events": {
      "fields": "id, name, type, artist, city, venueId, coverImage, description, ticketTiers[], status, tags[], saleStartTime, saleEndTime",
      "status_enum": "draft, on_sale, off_sale, sold_out",
      "type_enum": "concert, theatre, dance, exhibition, sports, kids"
    },
    "sessions": {
      "fields": "id, eventId, sessionName, startTime, endTime, venueId, hallName, totalSeats, availableSeats, soldSeats, ticketTierConfig[], status, metadata",
      "status_enum": "not_started, on_sale, sold_out, ended, off_sale",
      "inheritance": "票档继承自events的ticketTiers"
    },
    "venues": {
      "fields": "id, name, city, district, address, capacity, latitude, longitude, images[], description, facilities[]"
    }
  },
  "key_features": {
    "票档继承模式": "场次继承演出票档,可自定义价格覆盖演出价格",
    "状态机管理": "draft→on_sale→sold_out/ended, 支持off_sale暂停",
    "分页查询": "所有列表页支持分页(默认10条/页)",
    "智能搜索": "关键词搜索 + 下拉框筛选",
    "权限控制": "基于JWT Token的API认证"
  },
  "api_conventions": {
    "base_url": "/api/admin",
    "headers": "Authorization: Bearer {token}",
    "response_format": "{ code, msg, data, timestamp, success }",
    "error_handling": "401自动跳转登录页, 403提示权限不足"
  },
  "design_decisions": {
    "表格布局": "Flexbox固定布局,表头tbody固定高度600px可滚动",
    "列宽控制": "使用CSS类 .col-name, .col-city 等精确控制",
    "状态显示": "徽章badge + 颜色区分(success/danger/secondary等)",
    "表单提交": "FormData收集, 数组用ticket_tiers[].field格式",
    "扩展字段": "使用metadata JSON字段存储业务扩展配置"
  },
  "css_patterns": {
    "admin.css": "管理后台通用样式 - flex布局、卡片、表格、表单",
    "client-common.css": "客户端通用样式 - frontend-client使用, 包含按钮、徽章、工具类等",
    "client.css": "客户端专属样式 - frontend-client页面特定样式",
    "表格类": ".admin-table, .admin-table-header, .admin-table-footer",
    "表单类": ".admin-form, .admin-form-section, .form-group"
  },
  "recent_changes": [
    "2026-02-17: 前端客户端CSS重构 - common.css重命名为client-common.css, 所有资源路径改为绝对路径/assets/",
    "2025-02-02: 演出列表页优化 - 缩减城市/状态列宽,增加演出名称列宽",
    "2025-02-02: 添加类型映射 - typeMap将英文类型转换为中文显示",
    "2025-02-02: 场馆编辑页 - 容纳人数改为必填字段",
    "2025-02-02: 侧边栏调整 - 场馆管理移至数据概览和演出管理之间",
    "2025-02-01: 场次管理 - 完成列表页和编辑页前端逻辑"
  ],
  "todo_backend": [
    "实现所有CRUD接口 (events, sessions, venues, orders)",
    "JWT认证中间件 - Token生成、验证、黑名单",
    "票档继承逻辑 -场次继承演出票档配置",
    "状态流转控制 - 业务规则验证",
    "删除限制检查 - 有订单的数据不可删除"
  ],
  "todo_frontend": [
    "订单管理列表和详情页",
    "座位管理页面",
    "AI功能模块页面实现",
    "统一Toast提示组件",
    "批量操作功能"
  ],
  "important_notes": {
    "数据格式": "时间使用ISO 8601格式,价格使用number类型",
    "表单命名": "使用snake_case命名与数据库一致(如ticket_tiers[0].name)",
    "只读模式": "查看页通过readonly=true参数实现,禁用所有input",
    "分页参数": "page, pageSize, 返回total字段用于计算总页数",
    "状态映射": "前端维护statusMap/typeMap对象用于显示转换",
    "资源路径": "frontend-client使用绝对路径/assets/引用CSS和JS资源"
  }
}
